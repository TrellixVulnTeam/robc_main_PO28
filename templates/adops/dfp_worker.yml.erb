---
:worker:
  :adops:
    :db:
      :<%= dfp_env %>:
        :adapter: mysql2
        :encoding: utf8
        :pool: 5
        :username: <%= adops_db_user %>
        :password: <%= adops_db_pass %>
        :database: <%= adops_db_name %>
        :host: <%= adops_db_host %>
    :redis:
      :password: <%= redis_pass %>
      :host: <%= redis_host %>
  # this is a hack and will be removed in future releases
  # just to get it deployed to dev.
  :redis:
    :password: <%= redis_pass %>
    :host: <%= redis_host %>


  :rabbit:
    :host: <%= rabbit_host %>
    :pass: <%= rabbit_pass %>
    :port: <%= rabbit_port %>
    :user: <%= rabbit_user %>
    :vhost: <%= rabbit_vhost %>
    :threaded: true
    :heartbeat: 'server'

  :consumer:
    :prefetch: <%= worker_prefetch %>
    :no_ack: <%= worker_no_ack %>
    :exclusive: <%= worker_exclusive %>
    :exchange: <%= worker_exchange %>
    :exchange_options:
      :type: :<%= worker_exchange_type %>
      :durable: <%= worker_exchange_durable %>
      :auto_delete: <%= worker_exchange_auto_delete %>
      :exclusive: <%= worker_exchange_exclusive %>
    :routing_key: <%= dfp_routing_key %>
    :queue: <%= worker_q %>
    :queue_opitons:
      :durable: <%= worker_q_durable %>
      :auto_delete: <%= worker_q_auto_delete %>
      :exclusive: <%= worker_q_exclusive %>
  :server:
    :env: <%= dfp_env %>
    :workers: <%= total_workers %>
    :min_workers: <%= min_workers %>
    :max_workers: <%= max_workers %>
    :daemonize: <%= server_daemonize %>
    :pidfile: <%= server_pid_file %>
    :log_level: <%= server_log_level %>
