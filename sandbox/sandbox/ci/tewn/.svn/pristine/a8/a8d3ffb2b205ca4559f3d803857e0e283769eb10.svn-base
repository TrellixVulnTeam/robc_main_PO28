Handlebars.registerHelper('formatNumber', function(number, decimals, action) {
    switch(action){
        case 'percentage':
            number *= 100;
            break;
    }

    var re = '\\d(?=(\\d{3})+' + (decimals > 0 ? '\\.' : '$') + ')';
    return number.toFixed(Math.max(0, ~~decimals)).replace(new RegExp(re, 'g'), '$&,');
});