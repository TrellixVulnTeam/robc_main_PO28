/* backend2 - users_personal.js */

jQuery(document).ready(function() { 


	/* Panes */
	jQuery(".hub_list li a").click(function() {
		jQuery(".hub_list li").removeClass('tab_selected');
		jQuery(this).parent().addClass('tab_selected');
		jQuery('.pane').hide();
		var pane_name = ".table_container div#"+ $(this).attr('class');
		jQuery(pane_name).fadeIn(); //css('display','inline-block');

	});

	/* add note */
	$("#add_note_button").fancybox({
		hideOnOverlayClick	:	false,
		hideOnContentClick	:	false		
	});

	/* table sorter  */
    jQuery.tablesorter.addParser({
	id: "commaDigit",
	is: function(s, table) {
	    var c = table.config;
	    return jQuery.tablesorter.isDigit(s.replace(/,/g, ""), c);
		},
	format: function(s) {
	    return jQuery.tablesorter.formatFloat(s.replace(/,/g, ""));
	},
	type: "numeric"
    });

    $("#websites_table").tablesorter();
    $("#flagged_websites_table").tablesorter();
    $("#pages_table").tablesorter();

    jQuery('#notes').show(); //css('display','inline-block');

});
     
	/*function show_notes(website_id){
		$.ajax({
			type: "POST",
			url: "/websites/show_note/"+website_id,
			cache: false,
			success: function(html){			
				$("#show_notes").replaceWith(html);
			}
		});
		
		jQuery.blockUI({message:jQuery('#show_notes'), css: {padding: '10px', top: '100px', width:'350px', height:'200px'} });
	}
	
	function show_user_notes(user_id){
		$.ajax({
			type: "POST",
			url: "/users/show_note/"+user_id,
			cache: false,
			success: function(html){			
				$("#show_user_notes").replaceWith(html);
			}
		});
		
		jQuery.blockUI({message:jQuery('#show_user_notes'), css: {padding: '10px', top: '100px', width:'350px', height:'200px'} });
	}*/
	
	function show_pages(website_id, user_id, flagged){
		$.ajax({
			type: "POST",
			url: "/pages/latest_modified_pages/"+website_id+"/"+user_id+"/"+flagged,
			cache: false,
			success: function(html){
				$(".latest_pages").parent().hide();
				if(flagged == 1){
					$('#fw_top_5_pages_'+website_id).replaceWith(html);
					$("#fw_top_5_pages_"+website_id).show('slow');
				}else{
					$('#top_5_pages_'+website_id).replaceWith(html);
					$("#top_5_pages_"+website_id).show('slow');
				}
			}
		});
		
	}
	function flag_website(website_id, user_id){	
		$.ajax({
			type: "POST",
			url: "/users/flag_website/"+website_id+"/"+user_id,
			cache: false,
			success: function(html){
				alert("This Website has been flagged for you.");
			}
		});
	}
	
	function unflag_website(website_id, user_id){	
		$.ajax({
			type: "POST",
			url: "/users/unflag_website/"+website_id+"/"+user_id,
			cache: false,
			success: function(html){
				alert("This Website has been unflagged for you.");
			}
		});
	}