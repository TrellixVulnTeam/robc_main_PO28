<?php echo $this->element('crowdignite/backend2_toolbar', array("tab" => $tab, "user" => $user)); ?>

<link rel="stylesheet" href="http://netdna.bootstrapcdn.com/bootstrap/3.1.1/css/bootstrap.min.css">
<link rel="stylesheet" href="/css/boostrap-multiselect.css">
<link rel="stylesheet" href="/css/analysis/tpcategory.css">

<div class="row supercontainer">
    <div class="side-column">
        <span class="title icon icon-link">Analysis By</span>
        <ul class="list">
            <li><a href="/analysis/websites">Websites</a></li>
            <li><a href="/analysis/hubs">Hubs</a></li>
            <li><a href="/analysis/widgets">Widgets</a></li>
            <li><a href="/analysis/lpwebsites">Website distribution</a></li>
            <li><a href="/analysis/lpcoverage">Hubs distribution</a></li>
            <li class="active"><a href="/analysis/tpcategory">Traffic categories</a></li>
        </ul> <!-- list -->
    </div> <!-- side-column -->
    <div class="content-column">
        <div class="options-bar">
            <!-- <button class="pull-right btn btn-sm btn-info do-modal-info" data-toggle="modal" data-target="#information-modal"><strong>?</strong></button> -->
            <form class="form-inline" role="form">
                <label>Categories</label>
                <select class="form-control multiselect" multiple="multiple" name="categories">
                <?php foreach ($categories as $id => $name): ?>
                    <option value="<?php echo $id ?>"><?php echo $name ?></option>
                <?php endforeach ?>
                </select>
                <div class="form-group">
                    <label for="start_daterangepicker">Start</label>
                    <input class="form-control" type="text" name="start" id="start_daterangepicker" size="10"/>
                </div>
                <div class="form-group">
                    <label for="end_daterangepicker">End</label>
                    <input class="form-control" type="text" name="end" id="end_daterangepicker" size="10"/>
                </div>
                <div class="checkbox">
                    <label>
                        <input type="checkbox" name="day_by_day"> Results day by day
                    </label>
                </div>
                <button type="submit" class="btn btn-sm">Start analysis</button>
                <a href="/analysis/action/export_traffic_categories" id="export_pdf" class="btn btn-sm btn-primary">Export to excel</a>
            </form>
        </div> <!-- options-bar -->
        <div class="container-fluid main-container">
            <div class="row">
                <div class="col-md-12" id="analytic-results"></div>
            </div>
        </div> <!-- container -->
    </div> <!-- content-column -->
</div>  <!-- row supercontainer -->

<script type="text/x-handlebars-template" id="categories-tpl">
<table class="table table-hover table-bordered">
    <thead>
        <tr>
            <th class="text-center">Category <i class="caret pull-right"></i><i class="caretdown pull-right"></i></th>
            <th class="text-center">LP Clicks <i class="caret pull-right"></i><i class="caretdown pull-right"></i></th>
            <th class="text-center">LP Impressions <i class="caret pull-right"></i><i class="caretdown pull-right"></i></th>
            <th class="text-center">Widget Clicks <i class="caret pull-right"></i><i class="caretdown pull-right"></i></th>
            <th class="text-center">Widget Impressions <i class="caret pull-right"></i><i class="caretdown pull-right"></i></th>
            <th class="text-center">Life time clicks <i class="caret pull-right"></i><i class="caretdown pull-right"></i></th>
            <th class="text-center">Life time impressions <i class="caret pull-right"></i><i class="caretdown pull-right"></i></th>
        </tr>
    </thead>
    <tbody>
    {{#each data}}
        <tr>
            <td class="text-center">{{category}}</td>
            <td align="right">{{number landing_page_clicks}}</td>
            <td align="right">{{number landing_page_impressions}}</td>
            <td align="right">{{number widget_clicks}}</td>
            <td align="right">{{number widget_impressions}}</td>
            <td align="right">{{number lf_clicks}}</td>
            <td align="right">{{number lf_impressions}}</td>
        </tr>
    {{/each}}
    </tbody>
</table>
</script>

<script type="text/x-handlebars-template" id="categories-byday-tpl">
<table class="table table-hover table-bordered">
    <thead>
        <tr>
            <th class="text-center">Date</th>
            <th class="text-center">Category <i class="caret pull-right"></i><i class="caretdown pull-right"></i></th>
            <th class="text-center">LP Clicks <i class="caret pull-right"></i><i class="caretdown pull-right"></i></th>
            <th class="text-center">LP Impressions <i class="caret pull-right"></i><i class="caretdown pull-right"></i></th>
            <th class="text-center">Widget Clicks <i class="caret pull-right"></i><i class="caretdown pull-right"></i></th>
            <th class="text-center">Widget Impressions <i class="caret pull-right"></i><i class="caretdown pull-right"></i></th>
        </tr>
    </thead>
    <tbody>
    {{#each data}}
        <tr>
            <td class="text-center">{{date date}}</td>
            <td class="text-center">{{category}}</td>
            <td align="right">{{number landing_page_clicks}}</td>
            <td align="right">{{number landing_page_impressions}}</td>
            <td align="right">{{number widget_clicks}}</td>
            <td align="right">{{number widget_impressions}}</td>
        </tr>
    {{/each}}
    </tbody>
</table>
</script>

<script type="text/x-handlebars-template" id="error-tpl">
<div class="alert alert-danger alert-dismissible" role="alert">
    <button type="button" class="close" data-dismiss="alert"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
    <strong>Error!</strong> {{message}}
</div>
</script>

<!-- jQuery -->
<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
<!-- Bootstrap -->
<script src="http://netdna.bootstrapcdn.com/bootstrap/3.1.1/js/bootstrap.min.js"></script>
<!-- Bootstrap multiselect -->
<script src="/js/bootstrap-multiselect.js"></script>
<!-- Handlebars -->
<script src="/js/handlebars-v1.3.0.js"></script>
<!-- moment -->
<script src="http://cdnjs.cloudflare.com/ajax/libs/moment.js/2.8.3/moment.min.js"></script>
<!-- Table sorter -->
<script src="/js/jquery.tablesorter.js"></script>


<!-- Page Script -->
<script>
    $ = $.noConflict(true);
</script>