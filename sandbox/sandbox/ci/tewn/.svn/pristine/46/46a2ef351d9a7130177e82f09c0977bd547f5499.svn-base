/* dashboard_index.js */
$(function () {
    load_rss_feeds();
});

/**
 * Update the list of feeds for the current user
 */
function load_rss_feeds() {
    $.ajax({
        url: '/feed/publisher_list',
        dataType: 'json'
    }).done(function(data) {
        $('#rss .short_table tr.childs').remove();

        var item = [];
        $(data).each(function(key, value) {
            item.push('<tr class="childs">' +
                '<td>' + value.name + '</td>' +
                '<td>' + value.website + '</td>' +
                '<td>' + value.category + '</td>' +
                '<td><a target="_blank" href="' + value.url + '">' + value.url + '</a></td>' +
                '<td><span class="info_icon icon_' + (value.whitelist == 0 ? 'in' : '') + 'active"></span></td>' +
            '</tr>');
        });
        item = item.join('');

        $('#rss .short_table table tbody').append(item);
    });
}