Handlebars.registerHelper('equals', function(rvalue, lvalue, options) {
  if(rvalue === lvalue) {
    return options.fn(this);
  }
  return options.inverse(this);
});

(function(){
    var position = 0;

    Handlebars.registerHelper('position', function(operation) {
        if (operation == '+') {
            position++;
        }

        return position;
    });
})();

$(document).ready(function(){
    var traffic_template = Handlebars.compile($("#drive-traffic-tpl").html());

    var html = traffic_template({
        data: $.parseJSON(drive_traffic)
    });

    $("#traffic_to_container").append(html);

    $("#traffic_button").click(function(){
        var $traffic_container = $("#traffic_to_container");
        var empty_data = {
            data : [
                {
                    type : 'widget',
                    url : 'http://',
                    percentage : 0
                }
            ]
        };

        $traffic_container.append(traffic_template(empty_data));
    });

    $(".traffic_delete_button").live( "click", function(){
        $(this).parent().remove();
    });
});