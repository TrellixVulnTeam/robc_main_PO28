<link href="/js/jqtransformplugin/jqtransform.css" rel="stylesheet" type="text/css" />
<script src="/js/jquery.validate.min.js" type="text/javascript"></script>
<script type="text/javascript" src="/js/jqtransformplugin/jquery.jqtransform.js"></script>
<script language=javascript >
$(document).ready(function() {
   jQuery("form.jqtransform").jqTransform();
   jQuery("ul.form>li").each( function() {
        if( (jQuery(this).index() % 2) == 1 && !jQuery(this).hasClass("no_focus") ) jQuery(this).addClass("alt");
   });
   jQuery(".jqTransformInputWrapper, .jqTransformSelectWrapper, input#UserTerms").click( function() {
        if(!jQuery(this).hasClass("focus_line")) {
            jQuery("ul.form li").removeClass('focus_line');
            jQuery(this).parent().parent().addClass('focus_line');
        }
   });
   jQuery.validator.addMethod("complete_url", function(val, elem) {
           if (val.length == 0) { return false; }
           if(!/^(https?|):\/\//i.test(val)) {
                   val = 'http://'+val;
                   $(elem).val(val);
           }
           return /^(https?|ftp):\/\/(((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&amp;'\(\)\*\+,;=]|:)*@)?(((\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5]))|((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?)(:\d*)?)(\/((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&amp;'\(\)\*\+,;=]|:|@)+(\/(([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&amp;'\(\)\*\+,;=]|:|@)*)*)?)?(\?((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&amp;'\(\)\*\+,;=]|:|@)|[\uE000-\uF8FF]|\/|\?)*)?(\#((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&amp;'\(\)\*\+,;=]|:|@)|\/|\?)*)?$/i.test(val);
   });
    jQuery.validator.addMethod("phone", function(pnumber) {
      var stripped = pnumber.replace(/[\(\)\.\-\ ]/g, '');
      if (isNaN(parseInt(stripped)) || !(stripped.length >= 10)) {
        return false;
      }else{
        return true;
      }
    }, "Please enter a valid phone");
   jQuery("#create_form").validate({
    rules: {
      "data[Accounts][websitename]": {
         required: true,
         minlength: 3
      },
      "data[Accounts][name]": {
         required: true,
         minlength: 3
      },
      "data[Accounts][email]": {
         required: true,
         email: true
      },
      "data[Accounts][phone]": "phone",
      "data[Accounts][websiteurl]":"complete_url",
      "data[Accounts][americantraffic]":"required",
      "data[Accounts][monthlyviews]":"required",
      "data[Accounts][agree]":"required"
     },
     messages: {
      "data[Accounts][websitename]": {
        required: "Please your site's name",
        minlength: "Your username must consist of at least 3 characters"
      },
      "data[Accounts][name]": {
        required: "Please enter your full name",
        minlength: "Your username must consist of at least 3 characters"
      },
      "data[Accounts][phone]": {
        required: "Please provide a phone number",
        minlength: "Your phone must be at least 7 characters long"
      },
      "data[Accounts][websiteurl]": "Please enter a valid URL",
      "data[Accounts][email]": "Please enter a valid email",
      "data[Accounts][agree]": "You must accept our policy"
      }
   });
   jQuery(".btn_submit").click(function() {
        jQuery(".join_text").fadeOut(2000);
   });
});
</script>

<div class="row main">
<div id="content" class="column grid_12" style="position:relative;">
<div class="signup_picture"></div>
<h3 class="topContent">Sign up</h3>
<div id="content_area" class="row">
<div class="column grid_12">

<?
	echo $form->create('Accounts', array('action' => 'create',
                     'id' => 'create_form',
                     'class'=>'jqtransform signup_form',
										 'type' => 'Post',
										 'url' => 'http://'.MANAGEMENT_URL.'/accounts/create'));
?>

<div class="title">
    <h2>Crowd Ignite Sign Up</h2>
    <p>Fill in the form to request a Crownd Ignite account</p>

</div>

<ul class="form">
  <?
  $show_form = true;
    if(isset($success)) {
    if($success=="true") {
      echo '<h1 class="thanks">Thanks for your Interest.</h1>';
      echo '<p class="message">Request sent. We will get back to you within 3 business days.</p>';
      $show_form = false;
    } else {
      echo '<p class="message error_message">Please fill all the form boxes</p>';
    }
  }

  if($show_form) {
  ?>

	<li>
    <label>Name of Site</label>
    <div class="control">
      <?
      echo $form->text('websitename', array('size' => '25', 'id' => 'websitename'));
      echo $form->error('websitename', NULL, array('class' => 'error_message'));
      ?>
    </div>
    <br class="clearfloat"/>
	</li>

  <li>
    <label>Website URL</label>
    <div class="control">
      <?
      echo $form->text('websiteurl', array('size' => '25','id' => 'websiteurl','value'=>'http://'));
      echo $form->error('websiteurl', NULL, array('class' => 'error_message'));
      ?>
    </div>
    <br class="clearfloat"/>
  </li>

  <li>
    <label>Monthly Page Views</label>
    <div class="control">
      <?
      echo $form->text('monthlyviews', array('size' => '25','id' => 'monthlyviews', 'placeholder' => '50,000 is the minimum'));
      echo $form->error('monthlyviews', NULL, array('class' => 'error_message'));
      ?>
    </div>
    <br class="clearfloat"/>
  </li>

  <li>
    <label>Amount of US Traffic</label>
    <div class="control">
      <?
      $traffic_options = array('10%' => '10%', '20%' => '20%', '30%' => '30%', '40%' => '40%', '50%' => '50%','60%' => '60%','70%' => '70%','80%' => '80%','90%' => '90%','100%' => '100%', );
      echo $form->select('americantraffic', $traffic_options,'60%', array(
          'multiple'  => false,
          'class'   => 'jqTransform'
      ));
      //echo $form->text('americantraffic', array('size' => '25','id' => 'americantraffic'));
      //echo $form->error('americantraffic', NULL, array('class' => 'error_message'));
      ?>
      <span class="help lightgray">50% is the minimum</span>
    </div>
    <br class="clearfloat"/>
  </li>

  <li>
    <label>Your Name</label>
    <div class="control">
<?
    echo $form->text('name', array('size' => '25', 'id' => 'name'));
    echo $form->error('name', NULL, array('class' => 'error_message'));
?>
    </div>
    <br class="clearfloat"/>
  </li>

	<li>
    <label>Your Email</label>
    <div class="control">
<?
    echo $form->text('email', array('size' => '25', 'id' => 'email'));
    echo $form->error('email', NULL, array('class' => 'error_message'));
?>
		</div>
    <br class="clearfloat"/>
  </li>

  <li>
    <label>Your Phone</label>
    <div class="control">
<?
    echo $form->text('phone', array('size' => '25', 'id' => 'phone'));
    echo $form->error('phone', NULL, array('class' => 'error_message'));
?>
    </div>
    <br class="clearfloat"/>
  </li>

	<li>
    <label>&nbsp;</label>
		<div class="control">
<?
      echo $form->checkbox('agree', array('class'=>'jqtranformdone','style'=>'vertical-align:middle'));
?>
      <span class="terms">I accept the <a href="/terms" style="color:black;" target="_blank">Terms and Conditions</a></span>
		</div>
    <br class="clearfloat"/>
  </li>
<?php if($isAdmin) { ?>
  <li>
    <label>&nbsp;</label>
    <div class="control">
        <span class="terms">
          <?php echo $form->checkbox('send_email', array('class'=>'jqtranformdone','style'=>'vertical-align:middle')); ?>
          Check this if you don't want to send email to the publisher.
        </span>

    </div>
    <br class="clearfloat"/>
  </li>
<?php } ?>
  <li class="last no_focus">
<?
      echo $form->submit("Next >>", array('class'=>'jqtranformdone btn_submit'));
?>


    <br class="clearfloat"/>
  </li>
<?
  } // if show_form
?>
</ul>

<div class="signup_right">
  <div class="description_text">
    <h2>Ready for free<br/> quality traffic?</h2>
    <p>Crowd Ignite is an audience marketing platform that surfaces up the most popular content from a site across a network of contextually similar sites, exposing your content to a new and much larger audience. </p><p>While Crowd Ignite would like to allow all sites to use the platform, there are specific things we look at when we determine if a site is right for the platform: </p>
    <ul>
      <li>A site needs to be of a certain size and reach</li>
      <li>A site must have at least <strong>50%</strong> of their traffic reaching the US</li>
      <li>There should be NO explicit content</li>
    </ul>
        <div id="img_what_is_ci"></div>
    </p>
    <p><a id="btn_join" href="http://crowdignite.com/account"></a></p>
  </div>
</div>
<br class="clearfloat"/>

</form>
<br class="clearfloat"/>
<h3 class="bottomContent"></h3>
<br class="clearfloat"/>

</div>

</div>

</div>
</div>
