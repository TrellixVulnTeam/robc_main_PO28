<?php

require_once 'logger/analytic/element/interface.php';
require_once 'logger/analytic/element/abstract.php';
require_once 'logger/analytic/element/array.php';

class LoggerAnalyticElementArrayTest extends PHPUnit_Framework_TestCase
{
	public function testInitialValue()
	{
		$element = new Logger_Analytic_Element_Array('array_element_test');
		$this->assertTrue($element->getName() === 'array_element_test');
		$element->registerValue(123);
		$element->registerValue(456);
		$this->assertTrue($element->build() === '123,456');
	}

	public function testMultipleValues()
	{
		$element = new Logger_Analytic_Element_Array('array_element_test');
		$element->registerValue(array(123,456));
		$element->registerValue(array(789,123));
		$this->assertTrue($element->build() === '123,456,789,123');
	}

	public function testEmptyValue()
	{
		$element = new Logger_Analytic_Element_Array('array_element_test');
		$this->assertTrue($element->build() === '');
	}

	public function testFormat()
	{
		$format = array('separator' => '|', 'item' => '[%s]');
		$element = new Logger_Analytic_Element_Array(
			'array_element_test', $format
		);
		$element->registerValue(123);
		$element->registerValue(456);
		$this->assertTrue($element->build() === '[123]|[456]');
	}
}