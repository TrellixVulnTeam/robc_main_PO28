$(document).ready(function () {
    $('.do-truncate-index').on('click', function (event) {
        event.preventDefault();
        bootbox.dialog({
            size: 'small',
            title: 'Delete Contextual Index',
            message: 'Are you sure you want to delete the contextual index on Sphinx?',
            buttons: {
                No: {
                    className: 'btn-default',
                    callback: function() {}
                },
                Yes: {
                    className: 'btn-danger',
                    callback: function() {
                        var loading_dialog = bootbox.dialog({
                            size: 'small',
                            message: '<i class="preloading"></i>',
                        });
                        $.ajax('/contextual_engine/action/truncate').done(function (response) {
                            loading_dialog.modal('hide');
                        });
                    }
                }
            }
        });
    });
});