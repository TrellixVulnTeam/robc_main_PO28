<?php

namespace CI\Model\Cake;
use CI\Model\Cake;

class Website extends Cake
{
    const STATUS_ACTIVE    = 0;
    const STATUS_NEW       = 1;
    const STATUS_DENIED    = 2;
    const STATUS_SUSPENDED = 3;
    const STATUS_PAUSED    = 4;
    const STATUS_INACTIVE  = 5;
    const STATUS_DOWN      = 6;
    const STATUS_TRANSFER  = 7;

    protected $aRequiredMethods = array('find', 'query_read', 'field');

    public function getIdsByDomains($mDomains = null)
    {
        $aParams = array(
            'fields' => 'id',
            'conditions' => array(
                'visible' => true,
                'status' => array(
                    self::STATUS_ACTIVE,
                    self::STATUS_INACTIVE,
                    self::STATUS_NEW,
                    self::STATUS_TRANSFER
                ),
            ),
        );

        if (!empty($mDomains) || $mDomains === 0 || $mDomains === '0') {
            $aParams['conditions']['domain_primary'] = $mDomains;
        }

        $aWebsites = $this->oModel->find('list', $aParams);
        return array_keys($aWebsites);
    }
}